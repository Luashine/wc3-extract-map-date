# wc3-extract-map-date

Extracts map version and tries to date the period when the map was made based on contained files.

- w3i: format version, save count, world edit build, reforged: full game version if available
- map script (jass, older versions): prints the map header. it used to contain the actual map save date. this is manual for you to look at.

### Installation

See the comment in the script file itself

### Usage

`bash w3i-version.sh <path/to/wc3map.w3m ...>` - you can pass many maps at once for speed

Drag and drop works too.

### Example usage

Under Cygwin

```
find 'C:\Users\shiny\Documents\Warcraft III\Maps\Download' -name "*.w3?" -print0 | xargs -0 ./w3i-version.sh &> map-metadata.txt
```

Speed: ~850 MB of maps in 1 minute. LOL

### Example output

```
=--------=
Starting mpqeditor to extract 'war3map.w3i' from 'C:\Users\shiny\Documents\Warcraft III\Maps\Download\Season7\(6)BloodstoneMesa_LV.w3x' using list 'listfile.txt'
mpqeditor done
C:\Users\shiny\Documents\Warcraft III\Maps\Download\Season7\(6)BloodstoneMesa_LV.w3x
(6)BloodstoneMesa_LV.w3x
MD5 and SHA256 hashes:
8cac23e1c704c76d8072bc33151b56d1
851189656be1d7b1520aaa175c7780e66ce279390f944c4035efac2028752067
format_version    31
save_count        884
editor_version    6113
game_version      1.33.0.16269
we_version=6113: Reforged (internal), patch=1.33.0.16269, earliest=2020-10-2x, newer game version since=2020-11-xx

Starting mpqeditor to extract all files (searching for script) from 'C:\Users\shiny\Documents\Warcraft III\Maps\Download\Season7\(6)BloodstoneMesa_LV.w3x' using list 'listfile.txt'
./extracted/war3map.j-// 
./extracted/war3map.j-//   Warcraft III map script
./extracted/war3map.j://   Generated by the Warcraft III World Editor
./extracted/war3map.j-//   Map Author: Blizzard Entertainment
./extracted/war3map.j-// 
mapscript done
=________=
```

### TODO

- use a real mpq library, not this bs using MPQEditor.exe
- externalize the lua script code, it's an abomination
- this was a """quick""" script to simplify a certain someone's life: <https://github.com/CrystalScepter/dota-archive>
   - "quick" is defined as [i'm stupid for wasting so much time on this](https://www.youtube.com/watch?v=h6DNdop6pD8&pp=ygUWYmFkIGNvcHlwYXN0YSBpbnRvIHJhcA%3D%3D).
especially doing it this way. but hey, i have no other dev tools available here and neither does Crystal.
at least he managed to install Cygwin himself following the included instructions!
